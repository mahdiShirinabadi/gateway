# Log4j2 Configuration for Gateway Service
# Comprehensive logging setup for debugging and monitoring

# Appenders Configuration
appenders=console,file,rollingFile,asyncFile

# Console Appender
appender.console.type=Console
appender.console.name=STDOUT
appender.console.layout.type=PatternLayout
appender.console.layout.pattern=%d{yyyy-MM-dd HH:mm:ss.SSS} [%t] [%-5p] [%c{1}:%L] - %m%n

# File Appender
appender.file.type=File
appender.file.name=FILE
appender.file.fileName=logs/gateway/gateway.log
appender.file.layout.type=PatternLayout
appender.file.layout.pattern=%d{yyyy-MM-dd HH:mm:ss.SSS} [%t] [%-5p] [%c{1}:%L] - %m%n

# Rolling File Appender
appender.rollingFile.type=RollingFile
appender.rollingFile.name=ROLLING_FILE
appender.rollingFile.fileName=logs/gateway/gateway-rolling.log
appender.rollingFile.filePattern=logs/gateway/gateway-rolling-%d{yyyy-MM-dd}-%i.log.gz
appender.rollingFile.layout.type=PatternLayout
appender.rollingFile.layout.pattern=%d{yyyy-MM-dd HH:mm:ss.SSS} [%t] [%-5p] [%c{1}:%L] - %m%n
appender.rollingFile.policies.type=Policies
appender.rollingFile.policies.time.type=TimeBasedTriggeringPolicy
appender.rollingFile.policies.time.interval=1
appender.rollingFile.policies.size.type=SizeBasedTriggeringPolicy
appender.rollingFile.policies.size.size=100MB
appender.rollingFile.strategy.type=DefaultRolloverStrategy
appender.rollingFile.strategy.max=10

# Async File Appender
appender.asyncFile.type=AsyncAppender
appender.asyncFile.name=ASYNC_FILE
appender.asyncFile.appenderRef.ref=ROLLING_FILE
appender.asyncFile.bufferSize=8192
appender.asyncFile.includeLocation=false

# Root Logger Configuration
rootLogger.level=INFO
rootLogger.appenderRefs=stdout,asyncFile
rootLogger.appenderRef.stdout.ref=STDOUT
rootLogger.appenderRef.asyncFile.ref=ASYNC_FILE

# Gateway Authentication Filter Logger
logger.authFilter.name=com.eureka.gateway.AuthenticationFilter
logger.authFilter.level=DEBUG
logger.authFilter.additivity=false
logger.authFilter.appenderRefs=stdout,asyncFile
logger.authFilter.appenderRef.stdout.ref=STDOUT
logger.authFilter.appenderRef.asyncFile.ref=ASYNC_FILE

# Gateway Routes Logger
logger.routes.name=com.eureka.gateway.config
logger.routes.level=DEBUG
logger.routes.additivity=false
logger.routes.appenderRefs=stdout,asyncFile
logger.routes.appenderRef.stdout.ref=STDOUT
logger.routes.appenderRef.asyncFile.ref=ASYNC_FILE

# Token Cache Service Logger
logger.cache.name=com.eureka.gateway.service
logger.cache.level=DEBUG
logger.cache.additivity=false
logger.cache.appenderRefs=stdout,asyncFile
logger.cache.appenderRef.stdout.ref=STDOUT
logger.cache.appenderRef.asyncFile.ref=ASYNC_FILE

# Request/Response Logging
logger.request.name=com.eureka.gateway.request
logger.request.level=DEBUG
logger.request.additivity=false
logger.request.appenderRefs=stdout,asyncFile
logger.request.appenderRef.stdout.ref=STDOUT
logger.request.appenderRef.asyncFile.ref=ASYNC_FILE

# Security Events Logger
logger.security.name=com.eureka.gateway.security
logger.security.level=WARN
logger.security.additivity=false
logger.security.appenderRefs=stdout,asyncFile
logger.security.appenderRef.stdout.ref=STDOUT
logger.security.appenderRef.asyncFile.ref=ASYNC_FILE

# WebClient Logger (for external service calls)
logger.webClient.name=org.springframework.web.reactive.function.client
logger.webClient.level=DEBUG
logger.webClient.additivity=false
logger.webClient.appenderRefs=stdout,asyncFile
logger.webClient.appenderRef.stdout.ref=STDOUT
logger.webClient.appenderRef.asyncFile.ref=ASYNC_FILE

# Spring Cloud Gateway Logger
logger.gateway.name=org.springframework.cloud.gateway
logger.gateway.level=DEBUG
logger.gateway.additivity=false
logger.gateway.appenderRefs=stdout,asyncFile
logger.gateway.appenderRef.stdout.ref=STDOUT
logger.gateway.appenderRef.asyncFile.ref=ASYNC_FILE

# Redis Logger
logger.redis.name=org.springframework.data.redis
logger.redis.level=DEBUG
logger.redis.additivity=false
logger.redis.appenderRefs=stdout,asyncFile
logger.redis.appenderRef.stdout.ref=STDOUT
logger.redis.appenderRef.asyncFile.ref=ASYNC_FILE