# Log4j2 Configuration for Service2
# =================================

# Root Logger Configuration
rootLogger.level = INFO
rootLogger.appenderRef.console.ref = Console
rootLogger.appenderRef.file.ref = FileAppender
rootLogger.appenderRef.error.ref = ErrorAppender

# Console Appender
appender.console.type = Console
appender.console.name = Console
appender.console.target = SYSTEM_OUT
appender.console.layout.type = PatternLayout
appender.console.layout.pattern = %d{yyyy-MM-dd HH:mm:ss.SSS} [%t] %highlight{%-5level} %style{%logger{36}}{cyan} - %msg%n
appender.console.filter.threshold.type = ThresholdFilter
appender.console.filter.threshold.level = INFO

# File Appender for all logs
appender.file.type = RollingFile
appender.file.name = FileAppender
appender.file.fileName = logs/service2/service2.log
appender.file.filePattern = logs/service2/service2-%d{yyyy-MM-dd}-%i.log.gz
appender.file.layout.type = PatternLayout
appender.file.layout.pattern = %d{yyyy-MM-dd HH:mm:ss.SSS} [%t] %-5level %logger{36} - %msg%n
appender.file.policies.type = Policies
appender.file.policies.time.type = TimeBasedTriggeringPolicy
appender.file.policies.time.interval = 1
appender.file.policies.time.modulate = true
appender.file.policies.size.type = SizeBasedTriggeringPolicy
appender.file.policies.size.size = 10MB
appender.file.strategy.type = DefaultRolloverStrategy
appender.file.strategy.max = 30
appender.file.strategy.compressionLevel = 9

# Service2 Business Logger
appender.service2.type = RollingFile
appender.service2.name = Service2Appender
appender.service2.fileName = logs/service2/service2-business.log
appender.service2.filePattern = logs/service2/service2-business-%d{yyyy-MM-dd}-%i.log.gz
appender.service2.layout.type = PatternLayout
appender.service2.layout.pattern = %d{yyyy-MM-dd HH:mm:ss.SSS} [%t] %-5level %logger{36} - %msg%n
appender.service2.policies.type = Policies
appender.service2.policies.time.type = TimeBasedTriggeringPolicy
appender.service2.policies.time.interval = 1
appender.service2.policies.time.modulate = true
appender.service2.policies.size.type = SizeBasedTriggeringPolicy
appender.service2.policies.size.size = 5MB
appender.service2.strategy.type = DefaultRolloverStrategy
appender.service2.strategy.max = 15
appender.service2.strategy.compressionLevel = 9

# Error Appender
appender.error.type = RollingFile
appender.error.name = ErrorAppender
appender.error.fileName = logs/service2/errors.log
appender.error.filePattern = logs/service2/errors-%d{yyyy-MM-dd}-%i.log.gz
appender.error.layout.type = PatternLayout
appender.error.layout.pattern = %d{yyyy-MM-dd HH:mm:ss.SSS} [%t] %-5level %logger{36} - %msg%n
appender.error.filter.threshold.type = ThresholdFilter
appender.error.filter.threshold.level = ERROR
appender.error.policies.type = Policies
appender.error.policies.time.type = TimeBasedTriggeringPolicy
appender.error.policies.time.interval = 1
appender.error.policies.time.modulate = true
appender.error.policies.size.type = SizeBasedTriggeringPolicy
appender.error.policies.size.size = 5MB
appender.error.strategy.type = DefaultRolloverStrategy
appender.error.strategy.max = 15
appender.error.strategy.compressionLevel = 9

# Async Appenders for better performance
appender.asyncFile.type = AsyncAppender
appender.asyncFile.name = AsyncFileAppender
appender.asyncFile.bufferSize = 1024
appender.asyncFile.appenderRef.file.ref = FileAppender

appender.asyncService2.type = AsyncAppender
appender.asyncService2.name = AsyncService2Appender
appender.asyncService2.bufferSize = 512
appender.asyncService2.appenderRef.service2.ref = Service2Appender

# Logger Configurations
# =====================

# Service2 Controllers Logger
logger.service2Controller.name = com.eureka.service2.controller
logger.service2Controller.level = INFO
logger.service2Controller.additivity = false
logger.service2Controller.appenderRef.console.ref = Console
logger.service2Controller.appenderRef.file.ref = AsyncFileAppender
logger.service2Controller.appenderRef.service2.ref = AsyncService2Appender

# Service2 Service Logger
logger.service2Service.name = com.eureka.service2.service
logger.service2Service.level = INFO
logger.service2Service.additivity = false
logger.service2Service.appenderRef.console.ref = Console
logger.service2Service.appenderRef.file.ref = AsyncFileAppender
logger.service2Service.appenderRef.service2.ref = AsyncService2Appender

# Service2 Application Logger
logger.service2App.name = com.eureka.service2
logger.service2App.level = INFO
logger.service2App.additivity = false
logger.service2App.appenderRef.console.ref = Console
logger.service2App.appenderRef.file.ref = AsyncFileAppender

# Spring Framework Loggers
logger.spring.name = org.springframework
logger.spring.level = WARN
logger.spring.additivity = false
logger.spring.appenderRef.console.ref = Console
logger.spring.appenderRef.file.ref = AsyncFileAppender

logger.springWeb.name = org.springframework.web
logger.springWeb.level = INFO
logger.springWeb.additivity = false
logger.springWeb.appenderRef.console.ref = Console
logger.springWeb.appenderRef.file.ref = AsyncFileAppender

# Eureka Client Loggers
logger.eureka.name = com.netflix
logger.eureka.level = INFO
logger.eureka.additivity = false
logger.eureka.appenderRef.console.ref = Console
logger.eureka.appenderRef.file.ref = AsyncFileAppender

# Configuration Properties
# ========================
status = WARN
monitorInterval = 30
